#
# Copyright (c) 1990-2007 Aldor Software Organization Ltd (Aldor.org).
#

LibDir = $(ALDORLIBROOT)\lib
IncDir = $(ALDORLIBROOT)\include
DocDir = $(ALDORLIBROOT)\doc\tex
TestDir = $(ALDORLIBROOT)\test
StampDir  = $(LibDir)
DocStampDir  = $(DocDir)
TestStampDir  = $(TestDir)

ALDOR=$(COMPILER) $(FLAGS)

.SUFFIXES: .ao .as

# Implicit rule for building .al file
.as.ao: 
	@echo Compiling $*.as ...
	$(ALDOR) $(MAKEDIR)\$*.as
	@uniar rv $(ALDORLIB) $*.ao
	@del $*.ao

SRCS = sal_base sal_bstream sal_tstream sal_serial sal_partial sal_char\
	sal_manip sal_otype sal_itype sal_byte sal_htype sal_copy sal_gener\
	sal_syntax sal_order sal_torder

# directories that we depend on
DEPDIRS = lang

test: $(TESTSTAMP)

doc: $(DOCSTAMP)

aobj: sal_gener.ao sal_base.ao sal_order.ao sal_torder.ao sal_copy.ao \
	sal_bstream.ao sal_tstream.ao sal_htype.ao sal_otype.ao sal_itype.ao \
	sal_itype.ao sal_serial.ao sal_byte.ao sal_manip.ao sal_char.ao \
	sal_partial.ao

clean:
	-@del /q *.c *.h *.fm *.ao *.o *~

# Explicit dependencies

sal_gener.ao:
sal_base.ao: sal_gener.ao
sal_order.ao: sal_base.ao
sal_torder.ao: sal_order.ao
sal_copy.ao: sal_base.ao
sal_bstream.ao: sal_base.ao
sal_tstream.ao: sal_base.ao
sal_htype.ao: sal_base.ao
sal_otype.ao: sal_tstream.ao
sal_itype.ao: sal_tstream.ao
sal_serial.ao: sal_bstream.ao
sal_byte.ao: sal_serial.ao sal_otype.ao sal_itype.ao sal_htype.ao
sal_manip.ao: sal_otype.ao sal_bstream.ao sal_byte.ao
sal_char.ao: sal_byte.ao sal_torder.ao
sal_partial.ao: sal_syntax.ao sal_char.ao
